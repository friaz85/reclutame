<!-- Title -->
<div class="breadcrumb-title">
  <h1 class="mb-0 fw-semibold">
    Post A New Job!
  </h1>
</div>

<!-- Post A New Job -->
<div class="jove-card">
  <form [formGroup]="frmJob">
    <div class="row">
      <div class="col-lg-12 col-md-12">
        <div class="form-group">
          <label>
            Job title
          </label>
          <input type="text" class="form-control shadow-none" placeholder="Title" formControlName="p_titulo_vacante"
            [ngClass]="{ 'is-invalid': submitted && fCo.p_titulo_vacante.value == '' }">
        </div>
      </div>
      <div class="col-lg-10 col-md-10 col-12 offset-lg-1 offset-md-1">
        <div class="form-group">
          <label>
            Job descrption
          </label>
          <div class="jove-card chat-card">
            <div class="chat-header d-md-flex align-items-center justify-content-between">
                <div class="user d-flex align-items-center">
                    <img src="assets/images/users/user1.png" width="50" class="rounded-circle" alt="user-image">
                    <div class="title">
                        <h5 class="fw-semibold">{{ reclutador.nombre }}</h5>
                        <!-- <span class="d-block active position-relative">Active now</span> -->
                        <!-- <span class="d-block deactive position-relative">Active now</span> -->
                    </div>
                </div>
                <!-- <a href="javascript:void(0);" class="delete-conversation d-inline-block">
                    Delete conversation
                </a> -->
            </div>
            <div class="chat-body">
                <ul class="ps-0 list-unstyled mb-0" id="txtJob" #txtJob>
                  <ng-container *ngFor="let chat of arrChat">
                    <li class="position-relative right" *ngIf="chat.p_tipo == 'user'">
                        <img src="assets/images/users/user1.png" width="50" class="rounded-circle user" alt="user-image">
                        <div class="message">
                            <div>
                              <p>{{ chat.p_mensaje }}</p>
                            </div>
                        </div>
                        <span class="time d-block">{{ chat.p_hora_min }}</span>
                    </li>
                    <li class="position-relative" *ngIf="chat.p_tipo == 'ia'">
                        <img src="assets/images/users/Ai Robot.jpg" width="50" class="rounded-circle user" alt="user-image">
                        <div class="message">
                            <div>
                                <p [innerHTML] = 'chat.p_mensaje'></p>
                            </div>
                        </div>
                        <span class="time d-block">{{ chat.p_hora_min }}</span>
                    </li>
                  </ng-container>

                </ul>
            </div>
            <div class="chat-footer d-md-flex align-items-center">
                <form>
                  <div class="d-flex justify-content-around align-items-center">
                    <input type="text" class="input-text" placeholder="Type something..."
                    [ngClass]="{ 'is-invalid': showError && txtIA == '' }"
                    [(ngModel)] = "txtIA" [ngModelOptions]="{standalone: true}" required
                    [attr.disabled]="arrChat.length > 0 ? null : true">
                    <div class="d-flex justify-content-between align-items-center ms-2">
                      <button type="submit" data-toggle="tooltip" data-placement="top" title="Send to IA"
                      (click)="postCrearVacante()"
                      [attr.disabled]="arrChat.length > 0 ? null : true"><i class="ri-send-plane-fill"></i></button>
                      <button type="button" *ngIf="vacanteCompletaIA" data-toggle="tooltip" data-placement="top"
                      title="Preview Job" (click)="openPopup()" class="ms-3"><i class="fa-regular fa-eye"></i></button>
                    </div>
                  </div>
                </form>
            </div>
        </div>
          <!-- <textarea #txtJob class="form-control shadow-none" cols="30" rows="8" placeholder="" [value]="displayedText"
            id="txtJob"></textarea>
          <div class="d-flex justify-content-between align-items-center mt-3">
            <input class="form-control shadow-none" type="text" placeholder="Write message to AI"
              formControlName="p_descripcion_vacante_send" />
            <button type="button" class="default-btn" (click)="postCrearVacante($event.target, txtJob)"
              *ngIf="showSendIA" data-toggle="tooltip" data-placement="top" title="Send to IA">
              <i class="fa-regular fa-paper-plane"></i>
            </button>
            <button type="button" class="default-btn ms-1" *ngIf="showSendIA" data-toggle="tooltip" data-placement="top"
              title="Preview Job" (click)="openPopup()">
              <i class="fa-regular fa-eye"></i>
            </button>
          </div>
          <div class="row">
            <div class="col-12 text-end">
            </div>
          </div> -->
        </div>
      </div>
      <!-- <div class="col-lg-6 col-md-6 col-12">
              <div class="form-group">
                <div class="d-flex justify-content-between align-items-center mb-2">
                  <label>
                      Job description
                  </label>
                </div>
              </div>
          </div> -->
      <!-- <div class="col-lg-6 col-md-6">
                <div class="form-group">
                    <label>
                        Email address
                    </label>
                    <input type="email" class="form-control shadow-none" formControlName="p_email"
                    [ngClass]="{ 'is-invalid': submitted && fCo.p_email.value == '' }">
                </div>
            </div> -->
            <!-- <div class="col-lg-6 col-md-6">
                <div class="form-group">
                    <label>
                        Specialisms
                    </label>
                    <select class="form-select shadow-none" >
                        <option selected>Category</option>
                        <option *ngFor="let item of arrCategorias; let i = index;" [value]="item.id_categoria">
                          {{ item.descripcion }}
                      </option>
                    </select>
                </div>
            </div>
            <div class="col-lg-6 col-md-6">
                <div class="form-group">
                    <label>
                        Job type
                    </label>
                    <select class="form-select shadow-none">
                        <option selected>Select</option>
                        <option *ngFor="let item of arrTipoTrabajo" [value]="item.id_tipo_trabajo">
                          {{ item.descripcion }}
                        </option>
                    </select>
                </div>
            </div>
            <div class="col-lg-6 col-md-6">
                <div class="form-group">
                    <label>
                        Offered salary (monthly)
                    </label>
                    <select class="form-select shadow-none">
                        <option selected>Select</option>
                        <option *ngFor="let item of arrSalarios" [value]="item.id_salario">
                          {{ item.rango }}
                        </option>
                    </select>
                </div>
            </div>
            <div class="col-lg-6 col-md-6">
                <div class="form-group">
                    <label>
                        Career level
                    </label>
                    <select class="form-select shadow-none">
                        <option selected>Select</option>
                        <option *ngFor="let item of arrNivelProfesional" [value]="item.id_nivel_profesional">
                          {{ item.descripcion }}
                    </select>
                </div>
            </div>
            <div class="col-lg-6 col-md-6">
                <div class="form-group">
                    <label>
                        Experience
                    </label>
                    <select class="form-select shadow-none">
                        <option selected>Select</option>
                        <option *ngFor="let item of arrExperiencias" [value]="item.id_experiencia">
                          {{ item.descripcion }}
                    </select>
                </div>
            </div>
            <div class="col-lg-6 col-md-6">
                <div class="form-group">
                    <label>
                        Gender
                    </label>
                    <select class="form-select shadow-none">
                        <option selected>Select</option>
                        <option *ngFor="let item of arrGenero" [value]="item.id_genero">
                          {{ item.descripcion }}
                    </select>
                </div>
            </div>
            <div class="col-lg-6 col-md-6">
                <div class="form-group">
                    <label>
                        Industry
                    </label>
                    <select class="form-select shadow-none">
                        <option selected>Select</option>
                        <option *ngFor="let item of arrIndustrias" [value]="item.id_industria">
                          {{ item.descripcion }}
                    </select>
                </div>
            </div>
            <div class="col-lg-6 col-md-6">
                <div class="form-group">
                    <label>
                        Qualification
                    </label>
                    <select class="form-select shadow-none">
                        <option selected>Select</option>
                        <option *ngFor="let item of arrGradoEscolar" [value]="item.id_grado_escolar">
                          {{ item.descripcion }}
                    </select>
                </div>
            </div>
            <div class="col-lg-12 col-md-12">
                <div class="form-group">
                    <label>
                        Application deadline date
                    </label>
                    <input type="text" class="form-control shadow-none" placeholder="">
                </div>
            </div>
            <div class="col-lg-6 col-md-6">
                <div class="form-group">
                    <label>
                        Country
                    </label>
                    <select class="form-select shadow-none" (change)="getCiudades($event.target.value)" >
                      <option value="0" selected>Select</option>
                      <option *ngFor="let item of arrPais" [value]="item.id_pais">
                        {{ item.descripcion }}
                      </option>
                    </select>
                </div>
            </div>
            <div class="col-lg-6 col-md-6">
                <div class="form-group">
                    <label>
                        City
                    </label>
                    <select class="form-select shadow-none" >
                      <option *ngFor="let item of arrCiudades" [value]="item.id_ciudad">
                        {{ item.descripcion }}
                      </option>
                    </select>
                </div>
            </div> -->
            <!-- <div class="col-lg-12 col-md-12">
                <div class="form-group">
                    <label>
                        Complete address
                    </label>
                    <input type="text" class="form-control shadow-none" formControlName="p_direccion"
                    [ngClass]="{ 'is-invalid': submitted && fCo.p_direccion.value == '' }">
                </div>
            </div> -->
    </div>
    <div class="row">
      <div class="col-lg-12 col-md-12 text-end">
        <button type="submit" class="default-btn" (click)="registroVacante('')" *ngIf="vacanteCompletaIA">
          Save
          <i class="fa-regular fa-floppy-disk"></i>
        </button>
      </div>
    </div>
  </form>
</div>


<!-- Modal -->
<div class="modal fade loginRegisterModal" tabindex="-1" aria-hidden="true" *ngIf="isOpen">
  <div class="modal-dialog modal-dialog-centered modal-xl">
    <div class="modal-content">
      <div class="modal-body">
        <app-modal-job-detail [job]="responseVacante" [company]="empresa"></app-modal-job-detail>
        <button (click)="closePopup()" type="button" class="close-btn">
          <i class="ri-close-fill"></i>
        </button>
      </div>
    </div>
  </div>
  <div class="modal-backdrop fade show"></div>
</div>
